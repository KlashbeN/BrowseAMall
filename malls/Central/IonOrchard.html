<!DOCTYPE html>
<html>
<head>
<title> Browse A Mall </title>
<link rel="stylesheet" type = "text/css" href = "/templates/css/mall-style.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src = "ionShops.js"></script>
<script src = "../scripts/collapsibleinfo.js"></script>
    <!-- START DEV SCRIPTS -->
    <script type="text/javascript" src="../scripts/src/unicode/categ_letters_numbers.js"></script>
    <script type="text/javascript" src="../scripts/src/unicode/normalizer_lowercase_nomark.js"></script>
    <script type="text/javascript" src="../scripts/src/unicode/unicode.js"></script>

    <script type="text/javascript" src="../scripts/src/analyzers.js"></script>
    <script type="text/javascript" src="../scripts/src/normalizers.js"></script>
    <script type="text/javascript" src="../scripts/src/normalizers/english/porter-stemmer.js"></script>
    <script type="text/javascript" src="../scripts/src/normalizers/english/metaphone.js"></script>
    <script type="text/javascript" src="../scripts/src/misc/dataloader.js"></script>
    <script type="text/javascript" src="../scripts/src/capabilities.js"></script>

    <script type="text/javascript" src="../scripts/src/utils.js"></script>
    <script type="text/javascript" src="../scripts/src/boolean-engine.js"></script>
    <script type="text/javascript" src="../scripts/src/common-engine.js"></script>
    <script type="text/javascript" src="../scripts/src/resultsets.js"></script>
    <script type="text/javascript" src="../scripts/src/storemanager.js"></script>
    <script type="text/javascript" src="../scripts/src/stores/memory_store.js"></script>
    <script type="text/javascript" src="../scripts/src/stores/websql_store.js"></script>
    <script type="text/javascript" src="../scripts/src/stores/indexeddb_store.js"></script>
    
    <!-- END DEV SCRIPTS -->

</head>

<body>
	
<div id ="header">
<a href="../index.html" ></a>
</div>

<section class="container">
    <nav>
      <ul class="nav">
        <li><a href="../index.html" class="nav-icon" title="Home"><span class="icon-home">Home</span></a></li>
        <li class = "active"><a href="../browse.html" title="Mall">Malls</a></li>
       <li><a href ="../parking.html" title = "Parking Rates">Parking Rates</a></li>
        <li><a href="../forums/index.php" title="Forums">Forums</a></li>
        <li><a href="../aboutus.html" title="About Us">About Us</a></li>
        <li><a href="../contactus.html" title="Contact">Contact Us</a></li>
      </ul>
    </nav>
  </section>

<div id ="mallinfo">
<h2 style =" font-family:Cursive; font-size:200%;"> Ion Orchard </h2>

<img src="http://livestudios.com/blog/wp-content/uploads/2010/12/30.jpg" alt="VivoCity" height ="300px" width:"400px" >


<div id="container">
    <div class="expandable-panel" id="cp-1">
        <div class="expandable-panel-heading">
            <h2>How to get there?<span class="icon-close-open"></span></h2>
         </div>
        <div class="expandable-panel-content">
            <p> 
<p>Click <a href="https://www.google.com.sg/maps/dir//ION+Orchard,+2+Orchard+Turn,+Singapore+238801/@1.303517,103.832224,17z/data=!4m13!1m4!3m3!1s0x31da198dea21cc31:0x5cbe8874aa0b1b37!2sION+Orchard!3b1!4m7!1m0!1m5!1m1!1s0x31da198dea21cc31:0x5cbe8874aa0b1b37!2m2!1d103.832224!2d1.303517"> here</a> for ION Orchard location on Google Map</p>

<h4> Nearest MRT </h4>
<p> Orchard MRT (NS22/TE14)</p>

<h4> Bus </h4> 
<p>14e, 124, 128, 143, 162, 162M, 167, 171, 190, 700, 700A, NR1, NR2, NR3</p></p>


        </div>
    </div>
 
    <div class="expandable-panel" id="cp-2">
        <div class="expandable-panel-heading">
            <h2>About ION Orchard <span class="icon-close-open"></span></h2>
         </div>
        <div class="expandable-panel-content">
            <p><h3> Opening hours: </h3>
<p> 10am to 10pm Daily </p>

<h3> Contact </h3>
<p> 6238 8228 </p></p></p>
 
        </div>
  </div>
 
  <div class="expandable-panel" id="cp-3">
     <div class="expandable-panel-heading">
         <h2>Directory<span class="icon-close-open"></span></h2>
     </div>
     <div class="expandable-panel-content">
         <p><div class="formbg">
    <div id="application">
        <div>
            <input type="text" id="typehere" class="typebox">
            <button id="search">Search!</button>
        </div>
    </div>
</div>
<div class="grid">
    <div id="results"></div>
</div>
<div id="debug"></div></p>
     </div>
  </div>
</div>

<script type="text/javascript">

    /**
     * The initializer is a function called by the engine when the index
     * is created for the first time. It provides an opportunity to populate
     * the index with its data.
     * @param {fullproof.TextInjector} injector an object of type fullproof.TextInjector
     * @param callback function function to call when the initialization is done
     */
    function initializer(injector, callback) {
        var synchro = fullproof.make_synchro_point(callback, ionShops.length);
        for (var i=0;i<ionShops.length; ++i) {
            var text = ionShops[i].name +" " + ionShops[i].unit + " " + ionShops[i].contact;
            injector.inject(text, i, synchro);
        }
    }

    /**
     * This function get called when the engine is done opening itself
     * @param b true if the engine was successfully open, false otherwise
     */
    function engineReady(b) {
        if (!b) {
            alert("Can't load the search engine!");
        }

    }

        $(document).ready(function() {
        var dbName = "ion";
        var shopSearchEngine = new fullproof.BooleanEngine();

        var index1 = {
            name: "normalindex",
            analyzer: new fullproof.StandardAnalyzer(fullproof.normalizer.to_lowercase_nomark, fullproof.normalizer.remove_duplicate_letters),
            capabilities: new fullproof.Capabilities().setStoreObjects(false).setUseScores(false).setDbName(dbName).setDbSize(1*1024*1024),
            initializer: initializer
        };
        var index2 = {
            name: "stemmedindex",
            analyzer: new fullproof.StandardAnalyzer(fullproof.normalizer.to_lowercase_nomark, fullproof.english.metaphone),
            capabilities: new fullproof.Capabilities().setStoreObjects(false).setUseScores(false).setDbName(dbName).setDbSize(1*1024*1024),
            initializer: initializer
        };

        shopSearchEngine.open([index1, index2], fullproof.make_callback(engineReady, true), fullproof.make_callback(engineReady, false));

        /**
         * The seach function manages the terms lookup and result display
         */
        function search() {
            var value = $("#typehere").val();

            // Request a search to the shop engine, then displays the results, if any.
            shopSearchEngine.lookup(value, function(resultset) {
                var result ="";
                if (resultset && resultset.getSize()) {
                    var rsize = resultset.getSize();
                   // result = "<h3>Found " + rsize + " shops"+(rsize> 1 ? "s" : "")+" matching your request.</h3>";
                    result += "<table><tr><th>Name</th><th>Unit</th><th>Contact</th></tr>";
                    resultset.forEach(function(e) {
                        var c = ionShops[e];
                        result += "<tr><td style='font-weight: bold;'>"+ c.name+"</td>";
                        result += "<td>"+ c.unit+"</td>";
                        result += "<td>"+ c.contact+"</td></tr>";
                    });
                    result += "</table>";
                } else {
                    result = "<h3>No result found :-(</h3>";
                }
                $("#results").html(result);
            });
        }

        // Bind the search action
        $("#search").click(search);
        $("#typehere").change(search);

    });</script>
</body>
</html>
